!function(){var e=CryptoJS||{},t=e.AES,n=e.enc,r=e.lib,s=e.mode,a=e.pad,o="gmeek_unlock_",i={encrypt:function(e,r){return t.encrypt(e,r,{mode:s.ECB,padding:a.Pkcs7}).toString()},decrypt:function(e,r){return t.decrypt(e,r,{mode:s.ECB,padding:a.Pkcs7}).toString(n.Utf8)}};function c(e,t){var n=document.createElement("div");return n.style.cssText="border:1px solid #ddd;padding:20px;margin:10px 0;border-radius:5px;background:#f9f9f9;text-align:center",n.innerHTML='🔒 <strong style="color:#666">此内容已加密，请输入密码查看</strong><br><br><input type="password" id="pwd-'+e+'" placeholder="请输入密码" style="padding:8px;margin:5px;border:1px solid #ccc;border-radius:3px;width:200px"><br><button onclick="unlockCtnt(\''+e+"','"+t+'\')" style="padding:8px 15px;margin:10px 5px;background:#007cba;color:white;border:none;border-radius:3px;cursor:pointer">解锁内容</button>',n}function l(e,t){try{return i.decrypt(t,e)}catch(e){throw new Error("密码错误")}}function u(){var e=document.body.innerHTML,t=/<!--encrypt:\s*([^>]+)-->\s*<!--([^>]+)-->\s*<!--\/encrypt-->/g,n=e,r;while((r=t.exec(e))!==null){var s=r[1].trim(),a=r[2].trim(),u=localStorage.getItem(o+s);if(u){try{var d=l(u,a);n=n.replace(r[0],d)}catch(e){localStorage.removeItem(o+s);var g=c(s,a);n=n.replace(r[0],g.outerHTML)}}else{var g=c(s,a);n=n.replace(r[0],g.outerHTML)}}document.body.innerHTML!==n&&(document.body.innerHTML=n)}window.unlockCtnt=function(e,t){var n=document.getElementById("pwd-"+e).value;if(!n){alert("请输入密码");return}try{var r=l(n,t);localStorage.setItem(o+e,n),location.reload()}catch(e){alert("密码错误，请重试")}},document.addEventListener("DOMContentLoaded",function(){setTimeout(u,50)})}();
