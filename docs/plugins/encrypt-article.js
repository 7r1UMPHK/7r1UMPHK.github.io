!function(){function e(e,t){try{var n=atob(e),r="";for(var s=0;s<n.length;s++)r+=String.fromCharCode(n.charCodeAt(s)^t.charCodeAt(s%t.length));return r}catch(e){throw new Error("解密失败")}}function t(e,t){var n=document.createElement("div");return n.style.cssText="border:1px solid #ddd;padding:20px;margin:10px 0;border-radius:5px;background:#f9f9f9;text-align:center",n.innerHTML='🔒 <strong style="color:#666">此内容已加密，请输入密码查看</strong><br><br><input type="password" id="pwd-'+e+'" placeholder="请输入密码" style="padding:8px;margin:5px;border:1px solid #ccc;border-radius:3px;width:200px"><br><button onclick="unlkCnt(\''+e+"','"+t+'\')" style="padding:8px 15px;margin:10px 5px;background:#007cba;color:white;border:none;border-radius:3px;cursor:pointer">解锁内容</button>',n}function n(){var n=document.querySelector('meta[name="description"]');if(!n)return;var r=n.getAttribute("content"),s=/<!--encrypt:\s*([^>]+)-->\s*<!--([^>]+)-->\s*<!--\/encrypt-->/g,a=document.getElementById("postBody"),o=r,i;while((i=s.exec(r))!==null){var c=i[1].trim(),l=i[2].trim(),u=localStorage.getItem("gmk_"+c);if(u){try{var d=e(l,u);o=o.replace(i[0],"<p>"+d+"</p>")}catch(e){localStorage.removeItem("gmk_"+c);var g=t(c,l);o=o.replace(i[0],g.outerHTML)}}else{var g=t(c,l);o=o.replace(i[0],g.outerHTML)}}if(o!==r){var p=o.split(/<!--encrypt:[^>]+-->|<!--[^>]+-->|<!--\/encrypt-->/g).filter(function(e){return e.trim()}).join("");a.innerHTML=p}}window.unlkCnt=function(t,n){var r=document.getElementById("pwd-"+t).value;if(!r){alert("请输入密码");return}try{var s=e(n,r);localStorage.setItem("gmk_"+t,r),location.reload()}catch(e){alert("密码错误，请重试")}},document.addEventListener("DOMContentLoaded",function(){setTimeout(n,50)})}();